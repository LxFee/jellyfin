"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[3736],{9389:function(e,t,a){var i=a(33942);t.ZP={getVideoQualityOptions:function(e){var t=e.currentMaxBitrate,a=e.videoWidth,n=e.videoHeight;a/n<16/9&&(a=n*(16/9));var o=a||4096,l=[],r={name:i.ZP.translate("Auto"),bitrate:0,selected:e.isAutomaticBitrateEnabled};if(e.enableAuto&&l.push(r),o>=3800&&(l.push({name:"4K - 120 Mbps",maxHeight:2160,bitrate:12e7}),l.push({name:"4K - 80 Mbps",maxHeight:2160,bitrate:8e7})),o>=1900&&(l.push({name:"1080p - 60 Mbps",maxHeight:1080,bitrate:6e7}),l.push({name:"1080p - 40 Mbps",maxHeight:1080,bitrate:4e7}),l.push({name:"1080p - 20 Mbps",maxHeight:1080,bitrate:2e7}),l.push({name:"1080p - 15 Mbps",maxHeight:1080,bitrate:15e6}),l.push({name:"1080p - 10 Mbps",maxHeight:1080,bitrate:1e7})),o>=1260&&(l.push({name:"720p - 8 Mbps",maxHeight:720,bitrate:8e6}),l.push({name:"720p - 6 Mbps",maxHeight:720,bitrate:6e6}),l.push({name:"720p - 4 Mbps",maxHeight:720,bitrate:4e6})),o>=620&&(l.push({name:"480p - 3 Mbps",maxHeight:480,bitrate:3e6}),l.push({name:"480p - 1.5 Mbps",maxHeight:480,bitrate:15e5}),l.push({name:"480p - 720 kbps",maxHeight:480,bitrate:72e4})),l.push({name:"360p - 420 kbps",maxHeight:360,bitrate:42e4}),t){for(var s=l.length-1,c=0,u=l.length;c<u;c++){var d=l[c];if(d.bitrate>0&&d.bitrate<=t){s=c;break}}var b=l[s];e.isAutomaticBitrateEnabled?r.autoText=b.name:b.selected=!0}return l},getAudioQualityOptions:function(e){var t=e.currentMaxBitrate,a=[],n={name:i.ZP.translate("Auto"),bitrate:0,selected:e.isAutomaticBitrateEnabled};if(e.enableAuto&&a.push(n),a.push({name:"2 Mbps",bitrate:2e6}),a.push({name:"1.5 Mbps",bitrate:15e5}),a.push({name:"1 Mbps",bitrate:1e6}),a.push({name:"320 kbps",bitrate:32e4}),a.push({name:"256 kbps",bitrate:256e3}),a.push({name:"192 kbps",bitrate:192e3}),a.push({name:"128 kbps",bitrate:128e3}),a.push({name:"96 kbps",bitrate:96e3}),a.push({name:"64 kbps",bitrate:64e3}),t){for(var o=a.length-1,l=0,r=a.length;l<r;l++){var s=a[l];if(s.bitrate>0&&s.bitrate<=t){o=l;break}}var c=a[o];e.isAutomaticBitrateEnabled?n.autoText=c.name:c.selected=!0}return a}}},25466:function(e,t,a){a.r(t),a.d(t,{default:function(){return C}}),a(61013),a(23938),a(19068),a(87211),a(25901),a(92189),a(63238),a(95163),a(99785),a(91047),a(5769),a(17460),a(14078);var i=a(67469),n=a(94389),o=a(27515),l=a(9389),r=a(33942),s=a(56705),c=a(47005),u=(a(20716),a(45368),a(53913)),d=a(25152);function b(e){return b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},b(e)}function p(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(void 0,n=function(e,t){if("object"!==b(e)||null===e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var i=a.call(e,"string");if("object"!==b(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(i.key),"symbol"===b(n)?n:String(n)),i)}var n}function h(e){e.innerHTML=[5,10,15,20,25,30].map((function(e){return{name:r.ZP.translate("ValueSeconds",e),value:1e3*e}})).map((function(e){return'<option value="'.concat(e.value,'">').concat(e.name,"</option>")})).join("")}function y(e,t,a){var n="Audio"===a?l.ZP.getAudioQualityOptions({currentMaxBitrate:i.Z.maxStreamingBitrate(t,a),isAutomaticBitrateEnabled:i.Z.enableAutomaticBitrateDetection(t,a),enableAuto:!0}):l.ZP.getVideoQualityOptions({currentMaxBitrate:i.Z.maxStreamingBitrate(t,a),isAutomaticBitrateEnabled:i.Z.enableAutomaticBitrateDetection(t,a),enableAuto:!0});e.innerHTML=n.map((function(e){return'<option value="'.concat(e.bitrate||"",'">').concat(e.name,"</option>")})).join(""),i.Z.enableAutomaticBitrateDetection(t,a)?e.value="":e.value=i.Z.maxStreamingBitrate(t,a)}function m(e,t,a){e.value?(i.Z.maxStreamingBitrate(t,a,e.value),i.Z.enableAutomaticBitrateDetection(t,a,!1)):i.Z.enableAutomaticBitrateDetection(t,a,!0)}function v(e){var t=this,a=u.Z.getApiClient(t.options.serverId),n=t.options.userId,o=t.options.userSettings;return o.setUserInfo(n,a).then((function(){var e=t.options.enableSaveConfirmation;!function(e,t,a,n,o,l){s.ZP.show(),o.getUser(a).then((function(a){(function(e,t,a,n){return i.Z.enableSystemExternalPlayers(e.querySelector(".chkExternalVideoPlayer").checked),i.Z.maxChromecastBitrate(e.querySelector(".selectChromecastVideoQuality").value),m(e.querySelector(".selectVideoInNetworkQuality"),!0,"Video"),m(e.querySelector(".selectVideoInternetQuality"),!1,"Video"),m(e.querySelector(".selectMusicInternetQuality"),!1,"Audio"),a.allowedAudioChannels(e.querySelector("#selectAllowedAudioChannels").value),t.Configuration.AudioLanguagePreference=e.querySelector("#selectAudioLanguage").value,t.Configuration.PlayDefaultAudioTrack=e.querySelector(".chkPlayDefaultAudioTrack").checked,t.Configuration.EnableNextEpisodeAutoPlay=e.querySelector(".chkEpisodeAutoPlay").checked,a.preferFmp4HlsContainer(e.querySelector(".chkPreferFmp4HlsContainer").checked),a.enableCinemaMode(e.querySelector(".chkEnableCinemaMode").checked),a.enableNextVideoInfoOverlay(e.querySelector(".chkEnableNextVideoOverlay").checked),a.enableSetUsingLastTracks(e.querySelector(".chkSetUsingLastTracks").checked),a.chromecastVersion(e.querySelector(".selectChromecastVersion").value),a.skipForwardLength(e.querySelector(".selectSkipForwardLength").value),a.skipBackLength(e.querySelector(".selectSkipBackLength").value),n.updateUserConfiguration(t.Id,t.Configuration)})(t,a,n,o).then((function(){s.ZP.hide(),l&&(0,d.Z)(r.ZP.translate("SettingsSaved")),c.Events.trigger(e,"saved")}),(function(){s.ZP.hide()}))}))}(t,t.options.element,n,o,a,e)})),e&&e.preventDefault(),!1}var k=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.options=t,function(e,t){e.element.innerHTML=r.ZP.translateHtml('<form style="margin:0 auto"> <div class="verticalSection verticalSection-extrabottompadding"> <h2 class="sectionTitle"> ${HeaderAudioSettings} </h2> <div class="selectContainer"> <select is="emby-select" id="selectAllowedAudioChannels" label="${LabelAllowedAudioChannels}"> <option value="-1">${Auto}</option> <option value="1">${LabelSelectMono}</option> <option value="2">${LabelSelectStereo}</option> <option value="6">5.1 ${LabelSelectAudioChannels}</option> <option value="8">7.1 ${LabelSelectAudioChannels}</option> </select> </div> <div class="selectContainer"> <select is="emby-select" id="selectAudioLanguage" label="${LabelAudioLanguagePreference}"></select> </div> <label class="checkboxContainer"> <input type="checkbox" is="emby-checkbox" class="chkPlayDefaultAudioTrack"/> <span>${LabelPlayDefaultAudioTrack}</span> </label> </div> <div class="qualitySections hide"> <div class="verticalSection verticalSection-extrabottompadding videoQualitySection hide"> <h2 class="sectionTitle"> ${HeaderVideoQuality} </h2> <div class="selectContainer fldVideoInNetworkQuality hide"> <select is="emby-select" class="selectVideoInNetworkQuality" label="${LabelHomeNetworkQuality}"></select> </div> <div class="selectContainer fldVideoInternetQuality hide"> <select is="emby-select" class="selectVideoInternetQuality" label="${LabelInternetQuality}"></select> </div> <div class="selectContainer fldChromecastQuality hide"> <select is="emby-select" class="selectChromecastVideoQuality" label="${LabelMaxChromecastBitrate}"></select> </div> </div> <div class="verticalSection verticalSection-extrabottompadding musicQualitySection hide"> <h2> ${HeaderMusicQuality} </h2> <div class="selectContainer"> <select is="emby-select" class="selectMusicInternetQuality" label="${LabelInternetQuality}"></select> </div> </div> </div> <div class="verticalSection verticalSection-extrabottompadding"> <h2 class="sectionTitle"> ${TabAdvanced} </h2> <div class="checkboxContainer checkboxContainer-withDescription"> <label> <input type="checkbox" is="emby-checkbox" class="chkPreferFmp4HlsContainer"/> <span>${PreferFmp4HlsContainer}</span> </label> <div class="fieldDescription checkboxFieldDescription">${PreferFmp4HlsContainerHelp}</div> </div> <div class="checkboxContainer checkboxContainer-withDescription cinemaModeOptions"> <label> <input type="checkbox" is="emby-checkbox" class="chkEnableCinemaMode"/> <span>${EnableCinemaMode}</span> </label> <div class="fieldDescription checkboxFieldDescription">${CinemaModeConfigurationHelp}</div> </div> <div class="checkboxContainer fldEpisodeAutoPlay"> <label> <input type="checkbox" is="emby-checkbox" class="chkEpisodeAutoPlay"/> <span>${PlayNextEpisodeAutomatically}</span> </label> </div> <div class="checkboxContainer checkboxContainer-withDescription"> <label> <input type="checkbox" is="emby-checkbox" class="chkSetUsingLastTracks"/> <span>${SetUsingLastTracks}</span> </label> <div class="fieldDescription checkboxFieldDescription">${SetUsingLastTracksHelp}</div> </div> <div class="checkboxContainer checkboxContainer-withDescription fldEnableNextVideoOverlay"> <label> <input type="checkbox" is="emby-checkbox" class="chkEnableNextVideoOverlay"/> <span>${EnableNextVideoInfoOverlay}</span> </label> <div class="fieldDescription checkboxFieldDescription">${EnableNextVideoInfoOverlayHelp}</div> </div> <div class="checkboxContainer fldExternalPlayer checkboxContainer-withDescription hide"> <label> <input type="checkbox" is="emby-checkbox" class="chkExternalVideoPlayer"/> <span>${EnableExternalVideoPlayers}</span> </label> <div class="fieldDescription checkboxFieldDescription"> <div class="labelNativeExternalPlayers">${EnableExternalVideoPlayersHelp}</div> </div> </div> <div class="selectContainer"> <select is="emby-select" class="selectChromecastVersion" label="${LabelChromecastVersion}"> <option value="stable">${LabelStable}</option> <option value="unstable">${LabelUnstable}</option> </select> </div> <div class="selectContainer"> <select is="emby-select" class="selectSkipForwardLength" label="${LabelSkipForwardLength}"></select> </div> <div class="selectContainer"> <select is="emby-select" class="selectSkipBackLength" label="${LabelSkipBackLength}"></select> </div> </div> <button is="emby-button" type="submit" class="raised button-submit block btnSave hide"> <span>${Save}</span> </button> </form> ',"core"),e.element.querySelector("form").addEventListener("submit",v.bind(t)),e.enableSaveButton&&e.element.querySelector(".btnSave").classList.remove("hide"),t.loadData(),e.autoFocus&&o.Z.autoFocus(e.element)}(t,this)}var t,a;return t=e,a=[{key:"loadData",value:function(){var e=this,t=e.options.element;s.ZP.show();var a=e.options.userId,o=u.Z.getApiClient(e.options.serverId),c=e.options.userSettings;o.getUser(a).then((function(u){c.setUserInfo(a,o).then((function(){e.dataLoaded=!0,function(e,t,a,o){var c,u,d=o.getCurrentUserId(),b=t.Id;!function(e,t,a){if(t.Policy.EnableVideoPlaybackTranscoding?e.querySelector(".videoQualitySection").classList.remove("hide"):e.querySelector(".videoQualitySection").classList.add("hide"),n.M.supports("multiserver"))return e.querySelector(".fldVideoInNetworkQuality").classList.remove("hide"),e.querySelector(".fldVideoInternetQuality").classList.remove("hide"),void(t.Policy.EnableAudioPlaybackTranscoding?e.querySelector(".musicQualitySection").classList.remove("hide"):e.querySelector(".musicQualitySection").classList.add("hide"));a.getEndpointInfo().then((function(a){a.IsInNetwork?(e.querySelector(".fldVideoInNetworkQuality").classList.remove("hide"),e.querySelector(".fldVideoInternetQuality").classList.add("hide"),e.querySelector(".musicQualitySection").classList.add("hide")):(e.querySelector(".fldVideoInNetworkQuality").classList.add("hide"),e.querySelector(".fldVideoInternetQuality").classList.remove("hide"),t.Policy.EnableAudioPlaybackTranscoding?e.querySelector(".musicQualitySection").classList.remove("hide"):e.querySelector(".musicQualitySection").classList.add("hide"))}))}(e,t,o),e.querySelector("#selectAllowedAudioChannels").value=a.allowedAudioChannels(),o.getCultures().then((function(a){!function(e,t){var a="";a+="<option value=''>".concat(r.ZP.translate("AnyLanguage"),"</option>");for(var i=0,n=t.length;i<n;i++){var o=t[i];a+="<option value='".concat(o.ThreeLetterISOLanguageName,"'>").concat(o.DisplayName,"</option>")}e.innerHTML=a}(e.querySelector("#selectAudioLanguage"),a),e.querySelector("#selectAudioLanguage",e).value=t.Configuration.AudioLanguagePreference||"",e.querySelector(".chkEpisodeAutoPlay").checked=t.Configuration.EnableNextEpisodeAutoPlay||!1})),n.M.supports("externalplayerintent")&&b===d?e.querySelector(".fldExternalPlayer").classList.remove("hide"):e.querySelector(".fldExternalPlayer").classList.add("hide"),b===d&&(t.Policy.EnableVideoPlaybackTranscoding||t.Policy.EnableAudioPlaybackTranscoding)?(e.querySelector(".qualitySections").classList.remove("hide"),n.M.supports("chromecast")&&t.Policy.EnableVideoPlaybackTranscoding?e.querySelector(".fldChromecastQuality").classList.remove("hide"):e.querySelector(".fldChromecastQuality").classList.add("hide")):(e.querySelector(".qualitySections").classList.add("hide"),e.querySelector(".fldChromecastQuality").classList.add("hide")),e.querySelector(".chkPlayDefaultAudioTrack").checked=t.Configuration.PlayDefaultAudioTrack||!1,e.querySelector(".chkPreferFmp4HlsContainer").checked=a.preferFmp4HlsContainer(),e.querySelector(".chkEnableCinemaMode").checked=a.enableCinemaMode(),e.querySelector(".chkEnableNextVideoOverlay").checked=a.enableNextVideoInfoOverlay(),e.querySelector(".chkSetUsingLastTracks").checked=a.enableSetUsingLastTracks(),e.querySelector(".chkExternalVideoPlayer").checked=i.Z.enableSystemExternalPlayers(),y(e.querySelector(".selectVideoInNetworkQuality"),!0,"Video"),y(e.querySelector(".selectVideoInternetQuality"),!1,"Video"),y(e.querySelector(".selectMusicInternetQuality"),!1,"Audio"),c=e.querySelector(".selectChromecastVideoQuality"),u=l.ZP.getVideoQualityOptions({currentMaxBitrate:i.Z.maxChromecastBitrate(),isAutomaticBitrateEnabled:!i.Z.maxChromecastBitrate(),enableAuto:!0}),c.innerHTML=u.map((function(e){return'<option value="'.concat(e.bitrate||"",'">').concat(e.name,"</option>")})).join(""),c.value=i.Z.maxChromecastBitrate()||"",e.querySelector(".selectChromecastVersion").value=a.chromecastVersion();var p=e.querySelector(".selectSkipForwardLength");h(p),p.value=a.skipForwardLength();var m=e.querySelector(".selectSkipBackLength");h(m),m.value=a.skipBackLength(),s.ZP.hide()}(t,u,c,o)}))}))}},{key:"submit",value:function(){v.call(this)}},{key:"destroy",value:function(){this.options=null}}],a&&p(t.prototype,a),Object.defineProperty(t,"prototype",{writable:!1}),e}(),f=k,S=a(28978),g=a(6610),x=(a(664),S.UserSettings);function C(e,t){var a,i=t.userId||ApiClient.getCurrentUserId(),n=i===ApiClient.getCurrentUserId()?S:new x;e.addEventListener("viewshow",(function(){a?a.loadData():a=new f({serverId:ApiClient.serverId(),userId:i,element:e.querySelector(".settingsContainer"),userSettings:n,enableSaveButton:!0,enableSaveConfirmation:!0,autoFocus:g.default.isEnabled()})})),e.addEventListener("viewdestroy",(function(){a&&(a.destroy(),a=null)}))}}}]);