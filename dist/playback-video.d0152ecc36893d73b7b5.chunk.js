"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[2016],{661:function(e,t,n){n.r(t),n.d(t,{default:function(){return te}}),n(5769),n(63238),n(61418),n(17460),n(14078),n(20266),n(52077),n(911),n(27471),n(61370),n(61013),n(32081),n(43512);var i=n(65009),a=n.n(i),r=n(25883),s=n(53218),o=n(22155),l=n(47518),c=n(83094),u=n(12392),d=n(5099),f=n(28469),m=n(71616),b=n(70294),p=n(27515),v=n(47005),h=n(33942),g=n(94389),y=n(78695),w=n(28978),k=n(74783),S=(n(87201),n(61022),n(21865),n(1892)),P=n.n(S),T=n(95760),x=n.n(T),L=n(38311),O=n.n(L),E=n(58192),Z=n.n(E),C=n(38060),q=n.n(C),I=n(54865),M=n.n(I),D=n(79993),F={};F.styleTagTransform=M(),F.setAttributes=Z(),F.insert=O().bind(null,"head"),F.domAPI=x(),F.insertStyleElement=q(),P()(D.Z,F),D.Z&&D.Z.locals&&D.Z.locals;var B,H,R,A,N,z=n(53913),j=n(29856),K=(n(1203),n(76056),n(19068),n(87211),n(25901),n(92189),n(95163),n(99785),n(91047),n(34988)),_={};function V(e){return V="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},V(e)}function U(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(void 0,a=function(e,t){if("object"!==V(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,"string");if("object"!==V(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(i.key),"symbol"===V(a)?a:String(a)),i)}var a}function W(e){var t=document.createElement("div");document.body.appendChild(t),t.innerHTML='<div class="subtitleSync"> <div class="subtitleSyncContainer"> <button type="button" is="paper-icon-button-light" class="subtitleSync-closeButton"><span class="material-icons close" aria-hidden="true"></span></button> <div class="subtitleSyncTextField" contenteditable="true" spellcheck="false">0s</div> <div class="sliderContainer subtitleSyncSliderContainer"> <input is="emby-slider" type="range" step="1" min="-300" max="300" value="0" class="subtitleSyncSlider" data-slider-keep-progress="true"/> </div> </div> </div> ',H=t.querySelector(".subtitleSyncSlider"),R=t.querySelector(".subtitleSyncTextField"),A=t.querySelector(".subtitleSync-closeButton"),N=t.querySelector(".subtitleSyncContainer"),y.Z.tv&&(H.classList.add("focusable"),setTimeout((function(){H.enableKeyboardDragging()}),0)),N.classList.add("hide"),R.updateOffset=function(e){this.textContent=e+"s"},R.addEventListener("click",(function(){this.hasFocus=!0})),R.addEventListener("keydown",(function(e){if("Enter"===e.key){var t=/[-+]?\d+\.?\d*/g.exec(this.textContent);t?(t=t[0],t=parseFloat(t),t=Math.min(30,Math.max(-30,t)),this.textContent=t+"s",s.O.setSubtitleOffset(t,B),H.updateOffset((n=10*t,Math.min(300,Math.max(-300,n.toFixed(1)))))):this.textContent=(s.O.getPlayerSubtitleOffset(B)||0)+"s",this.hasFocus=!1,e.preventDefault()}else this.hasFocus=!0,null===e.key.match(/[+-\d.s]/)&&e.preventDefault();var n;e.stopPropagation()})),R.blur=function(){!this.hasFocus&&this.prototype&&this.prototype.blur()},H.updateOffset=function(e){this.value=void 0===e?0:e},H.addEventListener("change",(function(){s.O.setSubtitleOffset(G(this.value),B),R.updateOffset(G(this.value))})),H.getBubbleHtml=function(e){var t=function(e){var t=(e-50)/50;return(t*=30).toFixed(1)}(e);return'<h1 class="sliderBubbleText">'+(t>0?"+":"")+parseFloat(t)+"s</h1>"},A.addEventListener("click",(function(){s.O.disableShowingSubtitleOffset(B),Y.prototype.toggle("forceToHide")})),e.element=t}function G(e){return(e/10).toFixed(1)}_.styleTagTransform=M(),_.setAttributes=Z(),_.insert=O().bind(null,"head"),_.domAPI=x(),_.insertStyleElement=q(),P()(K.Z,_),K.Z&&K.Z.locals&&K.Z.locals;var Y=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),B=t,W(this)}var t,n;return t=e,(n=[{key:"destroy",value:function(){e.prototype.toggle("forceToHide"),B&&(s.O.disableShowingSubtitleOffset(B),s.O.setSubtitleOffset(0,B));var t=this.element;t&&(t.parentNode.removeChild(t),this.element=null)}},{key:"toggle",value:function(e){if(B&&s.O.supportSubtitleOffset(B))switch(e){case void 0:if(s.O.isShowingSubtitleOffsetEnabled(B)&&s.O.canHandleOffsetOnCurrentSubtitle(B)){s.O.getPlayerSubtitleOffset(B)||R.hasFocus||(H.value="0",R.textContent="0s",s.O.setSubtitleOffset(0,B)),N.classList.remove("hide");break}case"hide":if(R.hasFocus)break;case"forceToHide":N.classList.add("hide")}}}])&&U(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),$=Y,X=n(80135),J=n(3319),Q=n(55959);function ee(){return document.querySelector(".dialogContainer .dialog.opened")}function te(e){function t(t){if(!t||"Program"!==t.Type)return H&&(H.destroy(),H=null),void e.querySelector(".btnRecord").classList.add("hide");z.Z.getApiClient(t.ServerId).getCurrentUser().then((function(i){i.Policy.EnableLiveTvManagement&&n.e(3989).then(n.bind(n,63989)).then((function(n){var i=n.default;H?H.refreshItem(t):(H=new i({item:t,button:e.querySelector(".btnRecord")}),e.querySelector(".btnRecord").classList.remove("hide"))}))}))}function i(n){var i=n.originalItem;B=i;var a=n.displayItem||i;t(a);var r=a.SeriesName||a.Album;(a.EpisodeTitle||a.IsSeries)&&(r=a.Name),function(t,n){var i=m.ZP.getDisplayName(t,{includeParentInfo:"Program"!==t.Type,includeIndexNumber:"Program"!==t.Type}),a=n||i||"";if(!y.Z.mobile&&a&&t.PremiereDate)try{var r=f.ZP.parseISO8601Date(t.PremiereDate).getFullYear();a+=" (".concat(r,")")}catch(e){console.error(e)}J.Z.setTitle(a),i&&n&&(e.querySelector(".osdTitle").innerHTML=i);var s=n||(t?t.Name:null);s&&(document.title=s)}(a,r);var s=e.querySelector(".osdSecondaryMediaInfo"),o=b.ZP.getSecondaryMediaInfoHtml(a,{startDate:!1,programTime:!1});s.innerHTML=o,o?s.classList.remove("hide"):s.classList.add("hide"),R?(P(We,a.StartDate),P(Ge,a.EndDate),We.classList.remove("hide"),Ge.classList.remove("hide"),Ae=a.StartDate?f.ZP.parseISO8601Date(a.StartDate).getTime():0,Ne=a.EndDate?f.ZP.parseISO8601Date(a.EndDate).getTime():0):(We.classList.add("hide"),Ge.classList.add("hide"),We.innerHTML="",Ge.innerHTML="",Ae=0,Ne=0)}function S(e,t){return t?f.ZP.toLocaleTimeString(e,{hour:"numeric",minute:"2-digit",second:"2-digit"}).toLowerCase().replace("am","").replace("pm","").trim():f.ZP.getDisplayTime(e).toLowerCase().replace("am","").replace("pm","").trim()}function P(e,t){var n;t&&(n=S(t=f.ZP.parseISO8601Date(t))),e.innerHTML=n||""}var T=!1;function x(e){Qe.classList.remove("osdHeader-hidden"),function(e){if(A)"osd"===A&&e&&!y.Z.mobile&&V(e);else{var t=et;A="osd",E(t),t.classList.remove("hide"),t.classList.remove("videoOsdBottom-hidden"),e||(e=t.querySelector(".btnPause")),y.Z.mobile||V(e),Pe()}}(e),U()}function L(){Qe.classList.add("osdHeader-hidden"),function(){if("osd"===A){var e=et;E(e),e.classList.add("videoOsdBottom-hidden"),c.ZP.addEventListener(e,Je,Z,{once:!0}),A=null,Pe("hide"),document.activeElement&&document.activeElement.blur()}}(),d.ZP.hideCursor()}function O(){K&&(clearTimeout(K),K=null)}function E(e){c.ZP.removeEventListener(e,Je,Z,{once:!0})}function Z(e){var t=e.target;t==et&&(t.classList.add("hide"),c.ZP.removeEventListener(t,Je,Z,{once:!0}))}var C,q,I,M,D,F,B,H,R,A,N,K,_,V=(0,r.Z)((function(e){return p.Z.focus(e)}),50);function U(){!A||T||ee()?O():(O(),K=setTimeout(L,3e3))}function W(e){if("mouse"===(e.pointerType||(y.Z.mobile?"touch":"mouse"))){var t=e.screenX||e.clientX||0,n=e.screenY||e.clientY||0,i=_;if(!i)return void(_={x:t,y:n});if(Math.abs(t-i.x)<10&&Math.abs(n-i.y)<10)return;i.x=t,i.y=n,x()}}function G(t){var n,i=I;switch(t.detail.command){case"left":"osd"===A?x():A||(t.preventDefault(),s.O.rewind(i));break;case"right":"osd"===A?x():A||(t.preventDefault(),s.O.fastForward(i));break;case"pageup":s.O.nextChapter(i);break;case"pagedown":s.O.previousChapter(i);break;case"up":case"down":case"select":case"menu":case"info":case"play":case"playpause":case"pause":case"fastforward":case"rewind":case"next":case"previous":x();break;case"record":(n=e.querySelector(".btnRecord")).classList.contains("hide")||n.click(),x();break;case"togglestats":ke();break;case"back":"osd"!==A||ee()||(L(),t.preventDefault())}}function Y(){var t,n;!I.forcedFullscreen||s.O.isFullscreen(I)?((n=(t=e.querySelector(".btnFullscreen")).querySelector(".material-icons")).classList.remove("fullscreen_exit","fullscreen"),s.O.isFullscreen(I)?(t.setAttribute("title",h.ZP.translate("ExitFullscreen")+" (f)"),n.classList.add("fullscreen_exit")):(t.setAttribute("title",h.ZP.translate("Fullscreen")+" (f)"),n.classList.add("fullscreen"))):X.appRouter.back()}function te(){de(s.O.getCurrentPlayer())}function ne(n,a){var r,o;a.NowPlayingItem&&(F=!0,function(n,a,r){var o=r.PlayState||{};pe(o.IsPaused);var l=s.O.getSupportedCommands(a);Be=l,ge(a,o.IsMuted,o.VolumeLevel),_e&&!_e.dragging&&(_e.disabled=!o.CanSeek),Xe.disabled=!o.CanSeek,$e.disabled=!o.CanSeek;var c=r.NowPlayingItem||{};ze=o.PlaybackStartTimeTicks,he(o.PositionTicks,c.RunTimeTicks,o.PlaybackStartTimeTicks,o.PlaybackRate,o.BufferedRanges||[]),function(n,a){var r,o=a.NowPlayingItem;if(B=o,!o)return t(null),J.Z.setTitle(""),je.disabled=!0,_e.disabled=!0,Xe.disabled=!0,$e.disabled=!0,e.querySelector(".btnSubtitles").classList.add("hide"),e.querySelector(".btnAudio").classList.add("hide"),e.querySelector(".osdTitle").innerHTML="",void(e.querySelector(".osdMediaInfo").innerHTML="");R=function(e){return!("TvChannel"!==e.Type||!e.CurrentProgram)}(o),function(e){if("TvChannel"===e.Type){var t=z.Z.getApiClient(e.ServerId);return t.getItem(t.getCurrentUserId(),e.Id).then((function(e){return{originalItem:e,displayItem:e.CurrentProgram}}))}return Promise.resolve({originalItem:e})}(o).then(i),je.disabled=!1,_e.disabled=!1,Xe.disabled=!1,$e.disabled=!1,s.O.subtitleTracks(n).length?(e.querySelector(".btnSubtitles").classList.remove("hide"),Pe()):(e.querySelector(".btnSubtitles").classList.add("hide"),Pe("forceToHide")),s.O.audioTracks(n).length>1?e.querySelector(".btnAudio").classList.remove("hide"):e.querySelector(".btnAudio").classList.add("hide"),(null===(r=B.Chapters)||void 0===r?void 0:r.length)>1?(e.querySelector(".btnPreviousChapter").classList.remove("hide"),e.querySelector(".btnNextChapter").classList.remove("hide")):(e.querySelector(".btnPreviousChapter").classList.add("hide"),e.querySelector(".btnNextChapter").classList.add("hide"))}(a,r);var u=r.MediaSource&&null==r.MediaSource.RunTimeTicks;_e.setIsClear(u),c.RunTimeTicks&&_e.setKeyboardSteps(1e6*w.skipBackLength()/c.RunTimeTicks,1e6*w.skipForwardLength()/c.RunTimeTicks),-1===l.indexOf("ToggleFullscreen")||a.isLocalPlayer&&y.Z.tv&&s.O.isFullscreen(a)?e.querySelector(".btnFullscreen").classList.add("hide"):e.querySelector(".btnFullscreen").classList.remove("hide"),-1===l.indexOf("PictureInPicture")?e.querySelector(".btnPip").classList.add("hide"):e.querySelector(".btnPip").classList.remove("hide"),-1===l.indexOf("AirPlay")?e.querySelector(".btnAirPlay").classList.add("hide"):e.querySelector(".btnAirPlay").classList.remove("hide"),Y()}(0,this,a),r=e.querySelector(".btnPreviousTrack"),o=e.querySelector(".btnNextTrack"),r.classList.remove("hide"),o.classList.remove("hide"),o.disabled=!1,r.disabled=!1,!0,e.removeEventListener("viewbeforehide",Me),s.O.isPlayingVideo(I)&&e.addEventListener("viewbeforehide",Me),function(e){var t=sessionStorage.getItem("playbackRateSpeed");null!==t&&e.setPlaybackRate(t)}(this))}function ie(){F&&pe(this.paused())}function ae(){if(F){var e=this;ge(e,e.isMuted(),e.getVolume())}}function re(e,t){console.debug("nowplaying event: "+e.type),ne.call(this,e,t),se()}function se(){M=!1,D&&(D.destroy(),D=null)}function oe(t,n){He=null,se(),console.debug("nowplaying event: "+t.type),"Video"!==n.NextMediaType&&(e.removeEventListener("viewbeforehide",Me),X.appRouter.back())}function le(){var e=s.O.getPlayerState(this);ne.call(this,{type:"init"},e)}function ce(){e.querySelector(".osdMediaStatus").classList.remove("hide")}function ue(){e.querySelector(".osdMediaStatus").classList.add("hide")}function de(e){if(e===I||(fe(),I=e,e)){var t=s.O.getPlayerState(e);ne.call(e,{type:"init"},t),v.Events.on(e,"playbackstart",re),v.Events.on(e,"playbackstop",oe),v.Events.on(e,"volumechange",ae),v.Events.on(e,"pause",ie),v.Events.on(e,"unpause",ie),v.Events.on(e,"timeupdate",me),v.Events.on(e,"fullscreenchange",Y),v.Events.on(e,"mediastreamschange",le),v.Events.on(e,"beginFetch",ce),v.Events.on(e,"endFetch",ue),se(),e.isFetching&&ce()}}function fe(){Se(),Te(),se();var e=I;e&&(v.Events.off(e,"playbackstart",re),v.Events.off(e,"playbackstop",oe),v.Events.off(e,"volumechange",ae),v.Events.off(e,"pause",ie),v.Events.off(e,"unpause",ie),v.Events.off(e,"timeupdate",me),v.Events.off(e,"fullscreenchange",Y),v.Events.off(e,"mediastreamschange",le),I=null)}function me(){if(F&&B){var t=(new Date).getTime();if(!(t-Re<700)){Re=t;var i=this;He=s.O.duration(i);var a=1e4*s.O.currentTime(i);he(a,He,s.O.playbackStartTime(i),s.O.getPlaybackRate(i),s.O.getBufferedRanges(i));var r=B;!function(e,t){if("TvChannel"===t.Type){var n=t.CurrentProgram;if(n&&n.EndDate)try{var i=f.ZP.parseISO8601Date(n.EndDate);if((new Date).getTime()>=i.getTime()){console.debug("program info needs to be refreshed");var a=s.O.getPlayerState(e);ne.call(e,{type:"init"},a)}}catch(e){console.error("error parsing date: "+n.EndDate)}}}(i,r),function(t,i,a,r){if(r&&a&&!M&&!A&&"Episode"===i.Type&&w.enableNextVideoInfoOverlay()){var o=30;r>=3e10?o=40:r>=24e9&&(o=35),a>=r-1e7*o&&r>=6e9&&r-a>=2e8&&function(t){n.e(3651).then(n.bind(n,13651)).then((function(n){var i=n.default;A||D||(A="upnext",M=!0,s.O.nextItem(t).then((function(n){D=new i({parent:e.querySelector(".upNextContainer"),player:t,nextItem:n}),v.Events.on(D,"hide",be)}),be))}))}(t)}}(i,r,a,He)}}}function be(){"upnext"===A&&(A=null)}function pe(t){var n,i,a=e.querySelector(".btnPause"),r=a.querySelector(".material-icons");r.classList.remove("play_arrow","pause"),t?(n="play_arrow",i=h.ZP.translate("Play")):(n="pause",i=h.ZP.translate("ButtonPause")),r.classList.add(n),c.ZP.setElementTitle(a,i+" (k)",i)}function ve(e,t,n){return(n-e)/t*100}function he(e,t,n,i,a){if(R){if(_e&&!_e.dragging)if(Ae&&Ne){var r=(n+(e||0))/1e4,s=Ne-Ae;if(_e.value=ve(Ae,s,r),a.length){var o=ve(Ae,s,(n+(a[0].start||0))/1e4),l=ve(Ae,s,(n+(a[0].end||0))/1e4);_e.setBufferedRanges([{start:o,end:l}])}else _e.setBufferedRanges([])}else _e.value=0,_e.setBufferedRanges([]);Ve.innerHTML="",Ue.innerHTML=""}else{if(_e&&!_e.dragging){if(t){var c=e/t;c*=100,_e.value=c}else _e.value=0;t&&null!=e&&He&&!R&&B.RunTimeTicks&&"Recording"!==B.Type&&null!==i?Ye.innerHTML="&nbsp;&nbsp;&nbsp;&nbsp;"+b.ZP.getEndsAtFromPosition(t,e,i,!0):Ye.innerHTML=""}_e&&_e.setBufferedRanges(a,t,e),e>=0?(ye(Ve,e),Ve.classList.remove("hide")):Ve.classList.add("hide");var u=t-e;u>=0?(ye(Ue,u),Ue.classList.remove("hide")):Ve.classList.add("hide")}}function ge(t,n,i){var a=Be,r=!0,s=!0;-1===a.indexOf("Mute")&&(r=!1),-1===a.indexOf("SetVolume")&&(s=!1),t.isLocalPlayer&&g.M.supports("physicalvolumecontrol")&&(r=!1,s=!1);var o=e.querySelector(".buttonMute"),l=o.querySelector(".material-icons");l.classList.remove("volume_off","volume_up"),n?(o.setAttribute("title",h.ZP.translate("Unmute")+" (m)"),l.classList.add("volume_off")):(o.setAttribute("title",h.ZP.translate("Mute")+" (m)"),l.classList.add("volume_up")),r?o.classList.remove("hide"):o.classList.add("hide"),je&&(s?Ke.classList.remove("hide"):Ke.classList.add("hide"),je.dragging||(je.value=i||0))}function ye(e,t,n){if(null!=t){var i=f.ZP.getDisplayRunningTime(t);n&&(i="&nbsp;/&nbsp;"+i),e.innerHTML=i}else e.innerHTML=""}function we(e){if("stats"===e)ke();else if("suboffset"===e){var t=I;t&&(s.O.enableShowingSubtitleOffset(t),Pe())}}function ke(){n.e(1392).then(n.bind(n,1392)).then((function(e){var t=e.default,n=I;n&&(N?N.toggle():N=new t({player:n}))}))}function Se(){N&&(N.destroy(),N=null)}function Pe(e){var t=I;De?De.toggle(e):t&&(De=new $(t))}function Te(){De&&(De.destroy(),De=null)}function xe(e){if(!e.target.contains(C))return e.preventDefault(),e.stopPropagation(),!1}function Le(e){C=e.target;var t=k.ZP.getKeyName(e),n=e.ctrlKey||e.altKey||e.metaKey,i=et.querySelector(".btnPause");if(32!==e.keyCode){if(y.Z.tv&&!A)switch(t){case"ArrowLeft":case"ArrowRight":return x(_e),void _e.dispatchEvent(new KeyboardEvent(e.type,e));case"Enter":return s.O.playPause(I),void x(i)}if(y.Z.tv&&k.ZP.isNavigationKey(t))x();else switch(t){case"Enter":x();break;case"Escape":case"Back":"osd"!==A||ee()||(L(),e.stopPropagation());break;case"k":s.O.playPause(I),x(i);break;case"ArrowUp":case"Up":s.O.volumeUp(I);break;case"ArrowDown":case"Down":s.O.volumeDown(I);break;case"l":case"ArrowRight":case"Right":s.O.fastForward(I),x(Xe);break;case"j":case"ArrowLeft":case"Left":s.O.rewind(I),x($e);break;case"f":e.ctrlKey||e.metaKey||s.O.toggleFullscreen(I);break;case"m":s.O.toggleMute(I);break;case"p":case"P":e.shiftKey&&s.O.previousTrack(I);break;case"n":case"N":e.shiftKey&&s.O.nextTrack(I);break;case"NavigationLeft":case"GamepadDPadLeft":case"GamepadLeftThumbstickLeft":document.hasFocus()&&(s.O.rewind(I),x($e));break;case"NavigationRight":case"GamepadDPadRight":case"GamepadLeftThumbstickRight":document.hasFocus()&&(s.O.fastForward(I),x(Xe));break;case"Home":s.O.seekPercent(0,I);break;case"End":s.O.seekPercent(100,I);break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":if(!n){var a=10*parseInt(t,10);s.O.seekPercent(a,I)}break;case">":s.O.increasePlaybackRate(I);break;case"<":s.O.decreasePlaybackRate(I);break;case"PageUp":s.O.nextChapter(I);break;case"PageDown":s.O.previousChapter(I)}}else"BUTTON"===e.target.tagName&&y.Z.tv?x():(s.O.playPause(I),x(i),e.preventDefault(),e.stopPropagation(),C=null)}function Oe(){U()}function Ee(e){C=e.target,T=!0,U()}function Ze(){T=!1,U()}function Ce(e){C=e.target,T=!0,U()}function qe(){T=!1,U()}function Ie(){T=!1,U()}function Me(){if(s.O.isPlayingVideo()){j.Z.disableFullscreen(),clearTimeout(q);var t=I;e.removeEventListener("viewbeforehide",Me),fe(),s.O.stop(t)}}j.Z.enableFullscreen();var De,Fe=this,Be=[],He=0,Re=0,Ae=0,Ne=0,ze=0,je=e.querySelector(".osdVolumeSlider"),Ke=e.querySelector(".osdVolumeSliderContainer"),_e=e.querySelector(".osdPositionSlider"),Ve=e.querySelector(".osdPositionText"),Ue=e.querySelector(".osdDurationText"),We=e.querySelector(".startTimeText"),Ge=e.querySelector(".endTimeText"),Ye=e.querySelector(".endsAtText"),$e=e.querySelector(".btnRewind"),Xe=e.querySelector(".btnFastForward"),Je=c.ZP.whichTransitionEvent(),Qe=document.querySelector(".skinHeader"),et=e.querySelector(".videoOsdBottom-maincontrols");_e.enableKeyboardDragging(),je.enableKeyboardDragging(),y.Z.tv&&_e.classList.add("focusable"),e.addEventListener("viewbeforeshow",(function(){Qe.classList.add("osdHeader"),(0,Q.G2)(Q.q3.Full)})),e.addEventListener("viewshow",(function(){try{v.Events.on(s.O,"playerchange",te),de(s.O.getCurrentPlayer()),c.ZP.addEventListener(document,window.PointerEvent?"pointermove":"mousemove",W,{passive:!0}),x(),u.default.on(window,G),document.addEventListener("keydown",Le),c.ZP.addEventListener(document,"keydown",Oe,{capture:!0,passive:!0}),c.ZP.addEventListener(window,window.PointerEvent?"pointerdown":"mousedown",Ee,{capture:!0,passive:!0}),c.ZP.addEventListener(window,window.PointerEvent?"pointerup":"mouseup",Ze,{capture:!0,passive:!0}),c.ZP.addEventListener(window,"touchstart",Ce,{capture:!0,passive:!0}),["touchend","touchcancel"].forEach((function(e){c.ZP.addEventListener(window,e,qe,{capture:!0,passive:!0})})),c.ZP.addEventListener(window,"dragend",Ie,{capture:!0,passive:!0}),(l.Z.firefox||l.Z.edge)&&c.ZP.addEventListener(document,"click",xe,{capture:!0})}catch(e){X.appRouter.goHome()}})),e.addEventListener("viewbeforehide",(function(){N&&N.enabled(!1),document.removeEventListener("keydown",Le),c.ZP.removeEventListener(document,"keydown",Oe,{capture:!0,passive:!0}),c.ZP.removeEventListener(window,window.PointerEvent?"pointerdown":"mousedown",Ee,{capture:!0,passive:!0}),c.ZP.removeEventListener(window,window.PointerEvent?"pointerup":"mouseup",Ze,{capture:!0,passive:!0}),c.ZP.removeEventListener(window,"touchstart",Ce,{capture:!0,passive:!0}),["touchend","touchcancel"].forEach((function(e){c.ZP.removeEventListener(window,e,qe,{capture:!0,passive:!0})})),c.ZP.removeEventListener(window,"dragend",Ie,{capture:!0,passive:!0}),(l.Z.firefox||l.Z.edge)&&c.ZP.removeEventListener(document,"click",xe,{capture:!0}),O(),Qe.classList.remove("osdHeader"),Qe.classList.remove("osdHeader-hidden"),c.ZP.removeEventListener(document,window.PointerEvent?"pointermove":"mousemove",W,{passive:!0}),u.default.off(window,G),v.Events.off(s.O,"playerchange",te),fe()})),e.querySelector(".btnFullscreen").addEventListener("click",(function(){s.O.toggleFullscreen(I)})),e.querySelector(".btnPip").addEventListener("click",(function(){s.O.togglePictureInPicture(I)})),e.querySelector(".btnAirPlay").addEventListener("click",(function(){s.O.toggleAirPlay(I)})),e.querySelector(".btnVideoOsdSettings").addEventListener("click",(function(){var e=this;n.e(4268).then(n.bind(n,84268)).then((function(t){var n=I;if(n){var i,a=s.O.getPlayerState(n),r=s.O.supportSubtitleOffset(n)&&s.O.canHandleOffsetOnCurrentSubtitle(n);t.show({mediaType:"Video",player:n,positionTo:e,quality:null===(i=a.MediaSource)||void 0===i?void 0:i.SupportsTranscoding,stats:!0,suboffset:r,onOption:we}).finally((function(){U()})),setTimeout(U,0)}}))})),e.addEventListener("viewhide",(function(){Qe.classList.remove("hide")})),e.addEventListener("viewdestroy",(function(){Fe.touchHelper&&(Fe.touchHelper.destroy(),Fe.touchHelper=null),H&&(H.destroy(),H=null),Se(),Te()}));var tt=0;c.ZP.addEventListener(e,window.PointerEvent?"pointerdown":"click",(function(e){if(c.ZP.parentWithClass(e.target,["videoOsdBottom","upNextContainer"]))x();else{var t=e.pointerType||(y.Z.mobile?"touch":"mouse"),n=(new Date).getTime();switch(t){case"touch":n-tt>300&&(tt=n,"osd"===A?L():A||x());break;case"mouse":e.button||(q?(clearTimeout(q),q=0):q=setTimeout((function(){s.O.playPause(I),x(),q=0}),300));break;default:s.O.playPause(I),x()}}}),{passive:!0}),c.ZP.addEventListener(e,"dblclick",(function(t){t.target===e&&s.O.toggleFullscreen(I)})),e.querySelector(".buttonMute").addEventListener("click",(function(){s.O.toggleMute(I)})),je.addEventListener("input",(function(e){s.O.setVolume(e.target.value,I)})),_e.addEventListener("change",(function(){var e=I;if(e){var t=parseFloat(this.value);if(R){var n=t/100*(Ne-Ae)*1e4;n+=1e4*Ae,n-=ze,s.O.seek(n,e)}else s.O.seekPercent(t,e)}})),_e.getBubbleHtml=function(e){if(x(),R){if(Ae&&Ne){var t=Ne-Ae;return t/=100,t*=e,t+=Ae,'<h1 class="sliderBubbleText">'+S(new Date(parseInt(t)),!0)+"</h1>"}return"--:--"}if(!He)return"--:--";var n=He;n/=100,n*=e;var i=B;if(i&&i.Chapters&&i.Chapters.length&&i.Chapters[0].ImageTag){var r=function(e,t,n,i){for(var r,s=-1,o=0,l=n.length;o<l;o++){var c=n[o];i>=c.StartPositionTicks&&(r=c,s=o)}if(!r)return null;var u=function(e,t,n,i,a){return t.ImageTag?a.getScaledImageUrl(e.Id,{maxWidth:400,tag:t.ImageTag,type:"Chapter",index:n}):null}(t,r,s,0,e);if(u){var d='<div class="chapterThumbContainer">';return d+='<img class="chapterThumb" src="'+u+'" />',d+='<div class="chapterThumbTextContainer">',d+='<div class="chapterThumbText chapterThumbText-dim">',d+=a()(r.Name),d+="</div>",d+='<h2 class="chapterThumbText">',d+=f.ZP.getDisplayRunningTime(i),d+="</h2>",(d+="</div>")+"</div>"}return null}(z.Z.getApiClient(i.ServerId),i,i.Chapters,n);if(r)return r}return'<h1 class="sliderBubbleText">'+f.ZP.getDisplayRunningTime(n)+"</h1>"},e.querySelector(".btnPreviousTrack").addEventListener("click",(function(){s.O.previousTrack(I)})),e.querySelector(".btnPreviousChapter").addEventListener("click",(function(){s.O.previousChapter(I)})),e.querySelector(".btnPause").addEventListener("click",(function(){s.O.playPause(I)})),e.querySelector(".btnNextChapter").addEventListener("click",(function(){s.O.nextChapter(I)})),e.querySelector(".btnNextTrack").addEventListener("click",(function(){s.O.nextTrack(I)})),$e.addEventListener("click",(function(){s.O.rewind(I)})),Xe.addEventListener("click",(function(){s.O.fastForward(I)})),e.querySelector(".btnAudio").addEventListener("click",(function(){var e=I,t=s.O.audioTracks(e),i=s.O.getAudioStreamIndex(e),a=t.map((function(e){var t={name:e.DisplayTitle,id:e.Index};return e.Index===i&&(t.selected=!0),t})),r=this;Promise.resolve().then(n.bind(n,78407)).then((function(t){t.default.show({items:a,title:h.ZP.translate("Audio"),positionTo:r}).then((function(t){var n=parseInt(t);n!==i&&s.O.setAudioStreamIndex(n,e)})).finally((function(){U()})),setTimeout(U,0)}))})),e.querySelector(".btnSubtitles").addEventListener("click",(function(){var e=I,t=s.O.subtitleTracks(e),i=s.O.getSubtitleStreamIndex(e);null==i&&(i=-1),t.unshift({Index:-1,DisplayTitle:h.ZP.translate("Off")});var a=t.map((function(e){var t={name:e.DisplayTitle,id:e.Index};return e.Index===i&&(t.selected=!0),t})),r=this;Promise.resolve().then(n.bind(n,78407)).then((function(t){t.default.show({title:h.ZP.translate("Subtitles"),items:a,positionTo:r}).then((function(t){var n=parseInt(t);n!==i&&s.O.setSubtitleStreamIndex(n,e),Pe()})).finally((function(){U()})),setTimeout(U,0)}))}));var nt=function(t){var n="",i="",a="oneShotPulse",r=1500,s=e.querySelector("#syncPlayIcon");switch(t){case"schedule-play":n="sync spin",i="play_arrow centered",a="infinitePulse",r=-1,L();break;case"unpause":n="play_circle_outline";break;case"pause":n="pause_circle_outline",x();break;case"seek":n="update",a="infinitePulse",r=-1;break;case"buffering":n="schedule",a="infinitePulse",r=-1;break;case"wait-pause":n="schedule",i="pause shifted",a="infinitePulse",r=-1;break;case"wait-unpause":n="schedule",i="play_arrow shifted",a="infinitePulse",r=-1;break;default:return void(s.style.visibility="hidden")}s.setAttribute("class","syncPlayIconCircle "+a),s.querySelector(".primary-icon").setAttribute("class","primary-icon material-icons "+n),s.querySelector(".secondary-icon").setAttribute("class","secondary-icon material-icons "+i);var o=s.cloneNode(!0);o.style.visibility="visible",s.parentNode.replaceChild(o,s),r<0||setTimeout((function(){o.style.visibility="hidden"}),r)};v.Events.on(o.Z.Manager,"enabled",(function(t,n){n||(e.querySelector("#syncPlayIcon").style.visibility="hidden")})),v.Events.on(o.Z.Manager,"notify-osd",(function(e,t){nt(t)})),v.Events.on(o.Z.Manager,"group-state-update",(function(e,t,n){"Playing"===t&&"Unpause"===n||"Playing"===t&&"Ready"===n?nt("schedule-play"):"Paused"===t&&"Pause"===n?nt("pause"):"Paused"===t&&"Ready"===n?nt("clear"):"Waiting"===t&&"Seek"===n?nt("seek"):"Waiting"===t&&"Buffer"===n?nt("buffering"):"Waiting"===t&&"Pause"===n?nt("wait-pause"):"Waiting"===t&&"Unpause"===n&&nt("wait-unpause")}))}},79993:function(e,t,n){var i=n(54933),a=n.n(i),r=n(93476),s=n.n(r)()(a());s.push([e.id,".chapterThumbTextContainer,.videoOsdBottom{user-select:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none}.videoOsdBottom{-webkit-touch-callout:none;background:linear-gradient(0deg,hsla(0,0%,6%,.75),hsla(0,0%,6%,0));bottom:0;color:#fff;display:-webkit-flex;display:flex;-webkit-flex-direction:row;flex-direction:row;-webkit-justify-content:center;justify-content:center;left:0;padding:7.5em env(safe-area-inset-right) max(env(safe-area-inset-bottom),1.75em) env(safe-area-inset-left);pointer-events:none;position:fixed;right:0;transition:opacity .3s ease-out;-webkit-user-select:none;-ms-user-select:none;user-select:none;will-change:opacity}.osdLeftButtons{margin-right:auto}.layout-mobile .osdPlayControlButtons{-webkit-align-self:center;align-self:center;display:-webkit-flex;display:flex;font-size:110%;-webkit-justify-content:center;justify-content:center;left:0;margin-top:-2em;position:fixed;right:0;top:50%}.layout-mobile .osdPlayControlButtons .btnPause{font-size:140%;margin-left:12%;margin-right:12%}.layout-mobile .osdPlayControlButtons button{text-shadow:1px 1px 4px rgba(0,0,0,.2)}.layout-mobile .osdPlayControlButtons .material-icons:before{font-size:160%}.skinHeader-withBackground.osdHeader{-webkit-backdrop-filter:none;backdrop-filter:none;background:linear-gradient(180deg,hsla(0,0%,6%,.75),hsla(0,0%,6%,0));color:#eee;height:7.5em;pointer-events:none;position:relative;transition:opacity .3s ease-out;z-index:1}.osdHeader-hidden{opacity:0}.osdHeader .headerTop{max-height:3.5em;pointer-events:all}.osdHeader .headerButton:not(.headerBackButton):not(.headerCastButton):not(.headerSyncButton){display:none}.chapterThumbContainer{box-shadow:0 0 1.9vh #000;-webkit-flex-grow:1;flex-grow:1;position:relative}.chapterThumb{background-position:50%;background-repeat:no-repeat;background-size:contain;border:0;height:20vh;min-width:20vh}@media (orientation:portrait){.chapterThumb{height:30vw;min-width:30vw}}@media (max-height:50em)and (orientation:landscape){.chapterThumb{height:30vh;min-width:30vh}}.chapterThumbTextContainer{background:rgba(0,0,0,.7);bottom:0;left:0;padding:.25em .5em;position:absolute;right:0;-webkit-user-select:none;-ms-user-select:none;user-select:none}.chapterThumbText{margin:0;opacity:1;padding:.25em 0}.chapterThumbText-dim{opacity:.6}.videoOsdBottom-hidden{opacity:0}.osdControls{-webkit-flex-grow:1;flex-grow:1;padding:0 .8em;pointer-events:all}.layout-desktop .osdControls{max-width:175vh}.videoOsdBottom .buttons{-webkit-align-items:center;align-items:center;display:-webkit-flex;display:flex;-webkit-flex-wrap:wrap;flex-wrap:wrap;padding:.25em 0 0}.osdVolumeSliderContainer{-webkit-flex-grow:1;flex-grow:1;width:9em}.osdMediaInfo,.volumeButtons{-webkit-box-align:center;display:flex}.osdMediaInfo,.volumeButtons{-webkit-align-items:center;align-items:center;display:-webkit-flex}.volumeButtons{display:flex;margin:0 1em 0 .29em}.osdTimeText{margin-left:1em;-webkit-user-select:none;-ms-user-select:none;user-select:none}.osdTitle,.osdTitleSmall{margin:0 1em 0 0}.osdMediaInfo{-webkit-align-items:center;align-items:center;display:-webkit-flex;display:flex}.osdSecondaryMediaInfo{padding-left:.6em!important}.osdTextContainer{-webkit-align-items:center;align-items:center;display:-webkit-flex;display:flex;margin-bottom:.7em;padding-left:.5em;-webkit-user-select:none;-ms-user-select:none;user-select:none}.osdMainTextContainer{-webkit-align-items:baseline;align-items:baseline}.osdMediaStatus{margin-left:auto}@-webkit-keyframes spin{to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}.osdMediaStatus .animate{-webkit-animation:spin 4s linear infinite;animation:spin 4s linear infinite}@media (max-width:30em){.osdMediaInfo,.osdPoster{display:none!important}}@media (max-width:33.75em){.videoOsdBottom .paper-icon-button-light{margin:0}}@media (max-width:43em){.osdMediaStatus span,.videoOsdBottom .osdTimeText,.videoOsdBottom .volumeButtons{display:none!important}}.syncPlayContainer{-webkit-align-items:center;align-items:center;bottom:0;display:-webkit-flex;display:flex;-webkit-justify-content:center;justify-content:center;left:0;pointer-events:none;position:absolute;right:0;top:0}.primary-icon{-webkit-align-self:center;align-self:center;font-size:64px;position:absolute}.primary-icon.spin{-webkit-animation:spin 2s linear infinite;animation:spin 2s linear infinite;font-size:76px!important}.secondary-icon{font-size:24px;position:absolute}.secondary-icon.centered{-webkit-align-self:center;align-self:center;font-size:28px!important}.secondary-icon.shifted{bottom:0;font-size:52px;right:0}.syncPlayIconCircle{background:rgba(0,164,220,0);border-radius:50%;box-shadow:0 0 0 0 rgba(0,164,220,0);color:rgba(0,164,220,0);display:-webkit-flex;display:flex;height:96px;-webkit-justify-content:center;justify-content:center;margin:60px;position:relative;-webkit-transform:scale(1);transform:scale(1);visibility:hidden;width:96px}.syncPlayIconCircle.oneShotPulse{-webkit-animation:pulse 1.5s 1;animation:pulse 1.5s 1}.syncPlayIconCircle.infinitePulse{-webkit-animation:infinite-pulse 1.5s infinite;animation:infinite-pulse 1.5s infinite}@-webkit-keyframes pulse{0%{background:rgba(0,164,220,.3);box-shadow:0 0 0 0 rgba(0,164,220,.3);color:rgba(0,164,220,.7);-webkit-transform:scale(.95);transform:scale(.95)}70%{background:rgba(0,164,220,0);box-shadow:0 0 0 60px rgba(0,164,220,0);color:rgba(0,164,220,0);-webkit-transform:scale(1);transform:scale(1)}to{background:rgba(0,164,220,0);box-shadow:0 0 0 0 rgba(0,164,220,0);color:rgba(0,164,220,0);-webkit-transform:scale(.95);transform:scale(.95)}}@keyframes pulse{0%{background:rgba(0,164,220,.3);box-shadow:0 0 0 0 rgba(0,164,220,.3);color:rgba(0,164,220,.7);-webkit-transform:scale(.95);transform:scale(.95)}70%{background:rgba(0,164,220,0);box-shadow:0 0 0 60px rgba(0,164,220,0);color:rgba(0,164,220,0);-webkit-transform:scale(1);transform:scale(1)}to{background:rgba(0,164,220,0);box-shadow:0 0 0 0 rgba(0,164,220,0);color:rgba(0,164,220,0);-webkit-transform:scale(.95);transform:scale(.95)}}@-webkit-keyframes infinite-pulse{0%{background:rgba(0,164,220,.3);box-shadow:0 0 0 0 rgba(0,164,220,.3);color:rgba(0,164,220,.7);-webkit-transform:scale(.95);transform:scale(.95)}70%{background:rgba(0,164,220,0);box-shadow:0 0 0 60px rgba(0,164,220,0);color:rgba(0,164,220,.6);-webkit-transform:scale(1);transform:scale(1)}to{background:rgba(0,164,220,.3);box-shadow:0 0 0 0 rgba(0,164,220,0);color:rgba(0,164,220,.7);-webkit-transform:scale(.95);transform:scale(.95)}}@keyframes infinite-pulse{0%{background:rgba(0,164,220,.3);box-shadow:0 0 0 0 rgba(0,164,220,.3);color:rgba(0,164,220,.7);-webkit-transform:scale(.95);transform:scale(.95)}70%{background:rgba(0,164,220,0);box-shadow:0 0 0 60px rgba(0,164,220,0);color:rgba(0,164,220,.6);-webkit-transform:scale(1);transform:scale(1)}to{background:rgba(0,164,220,.3);box-shadow:0 0 0 0 rgba(0,164,220,0);color:rgba(0,164,220,.7);-webkit-transform:scale(.95);transform:scale(.95)}}@keyframes spin{to{-webkit-transform:rotate(-1turn);transform:rotate(-1turn)}}",""]),t.Z=s},34988:function(e,t,n){var i=n(54933),a=n.n(i),r=n(93476),s=n.n(r)()(a());s.push([e.id,".subtitleSync{position:absolute;width:100%}.subtitleSyncContainer{background:rgba(28,28,28,.8);border-radius:.3em;color:#fff;height:4.2em;margin-left:auto;margin-right:auto;min-width:18em;position:relative;width:40%}.subtitleSync-closeButton{color:#ccc;position:absolute;right:0;top:0;z-index:2}.subtitleSyncTextField{color:#fff;font-size:20px;left:0;margin-left:30%;margin-right:30%;position:absolute;text-align:center;top:.1em;width:40%;z-index:2}#prompt{-webkit-flex-shrink:0;flex-shrink:0}.subtitleSyncSliderContainer{border-radius:.3em;-webkit-flex-grow:1;flex-grow:1;height:1.4em;margin-left:1%;margin-right:1%;top:2.5em;width:98%;z-index:1}",""]),t.Z=s},25883:function(e,t,n){n.d(t,{Z:function(){return g}});var i=n(80369),a=n(97659),r=function(){return a.Z.Date.now()},s=/\s/,o=/^\s+/,l=function(e){return e?e.slice(0,function(e){for(var t=e.length;t--&&s.test(e.charAt(t)););return t}(e)+1).replace(o,""):e},c=n(74029),u=n(18742),d=/^[-+]0x[0-9a-f]+$/i,f=/^0b[01]+$/i,m=/^0o[0-7]+$/i,b=parseInt,p=function(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||(0,u.Z)(e)&&"[object Symbol]"==(0,c.Z)(e)}(e))return NaN;if((0,i.Z)(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=(0,i.Z)(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=l(e);var n=f.test(e);return n||m.test(e)?b(e.slice(2),n?2:8):d.test(e)?NaN:+e},v=Math.max,h=Math.min,g=function(e,t,n){var a,s,o,l,c,u,d=0,f=!1,m=!1,b=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function g(t){var n=a,i=s;return a=s=void 0,d=t,l=e.apply(i,n)}function y(e){return d=e,c=setTimeout(k,t),f?g(e):l}function w(e){var n=e-u;return void 0===u||n>=t||n<0||m&&e-d>=o}function k(){var e=r();if(w(e))return S(e);c=setTimeout(k,function(e){var n=t-(e-u);return m?h(n,o-(e-d)):n}(e))}function S(e){return c=void 0,b&&a?g(e):(a=s=void 0,l)}function P(){var e=r(),n=w(e);if(a=arguments,s=this,u=e,n){if(void 0===c)return y(u);if(m)return clearTimeout(c),c=setTimeout(k,t),g(u)}return void 0===c&&(c=setTimeout(k,t)),l}return t=p(t)||0,(0,i.Z)(n)&&(f=!!n.leading,o=(m="maxWait"in n)?v(p(n.maxWait)||0,t):o,b="trailing"in n?!!n.trailing:b),P.cancel=function(){void 0!==c&&clearTimeout(c),d=0,a=u=s=c=void 0},P.flush=function(){return void 0===c?l:S(r())},P}}}]);